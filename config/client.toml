features = ["kcp", "socks5"]

[server]
addr = ["127.0.0.1"]
ports = [8888]
retries = -1
crypto = ["rsa"]
compress = ["lz4"]
heartbeat_interval = 30000
auth = { type = "secret", secret = "12345678" }

[ssh1]
type = "forward"
boot = "fork"
exposes = [ "8080/tcp" ]
# channel = [ "8002/tcp" ]
restart = "always"
cryptos = ["aes"]
compress = ["lz4"]
target = { type = "tcp", port = 9999, addr = ["127.0.0.1"] }
keep_alive = { interval = 100 }

[ssh1.prepares.socks5]
auth = { type = "secret", secret = "1234" }


# [executable]
# type = "forward"
# boot = "fork"
# exposes = [ "7888/tcp" ]
# restart = "always"
# target = { type = "shell", path = "/bin/bash" }


# [bridge1]
# type = "bridge"
# bind = "0.0.0.0"
# port = 9999

# [proxy1]
# type = "proxy"
# bind = "0.0.0.0"
# port = 8081
# restart =  'never'
# crypto = ["rsa", "aes"]
# target = { type = "static", addr = ["baidu.com"], port = 443 }
# rewrite = { with = "http_header", host = "https://baidu.com" }

# [proxy2]
# type = "proxy"
# bind = "0.0.0.0"
# port = 7890
# restart =  'never'
# crypto = ["rsa", "aes"]
# target = { type = "dynamic" }